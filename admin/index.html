<head>
  <meta content='charset=UTF-8' />
  <meta name='viewport' content="width=device-width,user-scalable=0,initial-scale=1.0,maximum-scale=1.0" />

  <title>CDLL|Admin</title>
  <base href="/admin" />

  <style>
    @import "/bower_components/material-design-lite/material.min.css";
  </style>
</head>

<body class="mdl-layout">
<!--  <div ng-view="header"></div>-->

  <header class="mdl-layout__header- mdl-layout__header--scroll- mdl-color--primary" ng-controller='navCtrl'>
    </div>
    <div class="mdl-layout--large-screen-only mdl-layout__header-row">
      <h3>Admin</h3>
    </div>
    </div>
    <div class="mdl-layout__bar mdl-js-ripple-effect mdl-color--primary-dark clearfix">
      <a class="mdl-layout__tab" ng-repeat='nav in navbarList track by $index' ng-href="{{nav.url}}" ng-class='{"is-active": $index==currentNav}'>
        <span ng-bind='nav.name'></span>
        <span class="mdl-layout__tab-ripple-container mdl-js-ripple-effect" ><span class="mdl-ripple"></span></span>
      </a>
<!--
      <a ng-href="/group/admin/ctrl/home/action/feature" class="mdl-layout__tab">Features
      </a>
      <a ng-href="/group/admin/ctrl/home/action/detail" class="mdl-layout__tab">Details</a>
      <a ng-href="/group/home/ctrl/home/action/tech" class="mdl-layout__tab">Technology</a>
      <a ng-href="/group/home/ctrl/home/action/faq" class="mdl-layout__tab">FAQ</a>
      <a ng-href="/login" class="mdl-layout__tab">Login</a>
-->
      <button class="mdl-button mdl-js-button mdl-button--fab mdl-js-ripple-effect mdl-button--colored mdl-shadow--4dp mdl-color--accent" hidden>
        <i class="material-icons" role="presentation">add</i>
        <span class="visuallyhidden">Add</span>
      </button>
    </div>
  </header>
  <div ng-view="" ></div>


  <script src="/bower_components/rsvp/rsvp.min.js"></script>
  <script src="/bower_components/basket.js/dist/basket.js"></script>
  <script >
basket.require({
  url: '/bower_components/material-design-lite/material.min.js'
},{
  url: "/bower_components/angular/angular.min.js"
},{
  url: "/bower_components/angular-route/angular-route.min.js"
})
.then(function(){
  var admin= angular.module('admin', [
    'ngRoute'
  ])
  .constant('adminConfig', {
    nav: [
      { url: '/admin', name: 'Overview' }
      ,{ url: '/admin/group/admin/ctrl/home/action/feature', name: 'Features' }
      ,{ url: '/admin/group/admin/ctrl/home/action/detail', name: 'Details' }
      ,{ url: '/admin/group/home/ctrl/home/action/tech', name: 'Technology' }
      ,{ url: '/admin/group/home/ctrl/home/action/faq', name: 'FAQ' }
      ,{ url: '/admin/login', name: 'Login' }
    ]
  })
  .config(function($locationProvider){
    $locationProvider.baseUrl= '/admin'
    $locationProvider.html5Mode(true)
  })
  .config(function($routeProvider){
    return $routeProvider.when('/', {
      redirectTo: '/index'
      ,templateUrl: './src/view/login.html'
      ,controllerUrl: ''
    })
    .when('/login', {
      redirectTo: '/login'
      ,templateUrl: './src/view/login.html'
      ,controllerUrl: './src/controller/login.js'
    })
    .when('/group/:group/ctrl/:ctrl/action/:action', {
      redirectTo: '/login'
      ,templateUrl: './src/view/login.html'
      ,controllerUrl: './src/controller/login.js'
    })
    .otherwise({
      templateUrl: '/admin/src/view/404.html'
    })
  })
  .run([
    '$rootScope'
    ,'$location'
    ,'$http'
    ,function($rootScope, $location, $http){
      $rootScope.$on('$routeChangeStart', function(eve, next, curr){
        console.info(123, eve, next, curr)
      })
    }
  ])
  .controller('navCtrl', [
    '$scope'
    ,'$location'
    ,'adminConfig'
    ,function($scope, $location, Config){
      console.info($scope)
      $scope.navbarList= Config.nav
      console.info($location)
      $scope.currentNav= function(){
        $scope.navbarList.forEach(function(nav, index){
          if($location.url().match(nav.url)){
            return index
          }
        })
        return 0
      }
    }
  ])
  angular.bootstrap(document, ['admin'])
})
  </script>
</body>
